package org.eclipse.sw360.datahandler.postgres;

import java.io.Serializable;
import java.util.UUID;
import jakarta.persistence.Column;
import jakarta.persistence.Embeddable;
import jakarta.persistence.EmbeddedId;
import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.JoinColumn;
import jakarta.persistence.ManyToMany;
import jakarta.persistence.ManyToOne;
import jakarta.persistence.MapsId;
import jakarta.persistence.PrimaryKeyJoinColumn;
import jakarta.persistence.Table;

@Embeddable
class RelationKey implements Serializable {

    @Column(name = "vulnerability_id")
    Long vulnID;

    @Column(name = "release_id")
    Long relId;

    // standard constructors, getters, and setters
    // hashcode and equals implementation
}


@Entity
@Table(name = "vulnerability_release_relations")
public class VulnerabilityReleaseRelationPG {
    // @Id
    // @GeneratedValue(strategy = GenerationType.UUID)
    // private UUID id;

    @Id
    @ManyToOne
    // @MapsId("vulnID")
    // @PrimaryKeyJoinColumn(name = "vulnerability_id")
    private VulnerabilityPG vulnerability;

    @Id
    @ManyToOne
    // @MapsId("relId")
    // @PrimaryKeyJoinColumn(name = "release_id")
    private ReleasePG release;

    private String revision;

    private String verificationStateInfo;

    private String matchedBy;

    private String usedNeedle;

    // public UUID getId() {
    // return id;
    // }

    // public void setId(UUID id) {
    // this.id = id;
    // }

    public VulnerabilityPG getVulnerability() {
        return vulnerability;
    }

    public void setVulnerability(VulnerabilityPG vulnerability) {
        this.vulnerability = vulnerability;
    }

    public ReleasePG getRelease() {
        return release;
    }

    public void setRelease(ReleasePG release) {
        this.release = release;
    }

    public String getRevision() {
        return revision;
    }

    public void setRevision(String revision) {
        this.revision = revision;
    }

    public String getVerificationStateInfo() {
        return verificationStateInfo;
    }

    public void setVerificationStateInfo(String verificationStateInfo) {
        this.verificationStateInfo = verificationStateInfo;
    }

    public String getMatchedBy() {
        return matchedBy;
    }

    public void setMatchedBy(String matchedBy) {
        this.matchedBy = matchedBy;
    }

    public String getUsedNeedle() {
        return usedNeedle;
    }

    public void setUsedNeedle(String usedNeedle) {
        this.usedNeedle = usedNeedle;
    }

    public VulnerabilityReleaseRelationPG() {}

    public VulnerabilityReleaseRelationPG(VulnerabilityPG vulnerability, ReleasePG release,
            String revision, String verificationStateInfo, String matchedBy, String usedNeedle) {
        this.vulnerability = vulnerability;
        this.release = release;
        this.revision = revision;
        this.verificationStateInfo = verificationStateInfo;
        this.matchedBy = matchedBy;
        this.usedNeedle = usedNeedle;
    }

    @Override
    public String toString() {
        return "VulnerabilityReleaseRelation{vulnerability=" + vulnerability + ", release="
                + release + ", revision='" + revision + '\'' + ", verificationStateInfo='"
                + verificationStateInfo + '\'' + ", matchedBy='" + matchedBy + '\''
                + ", usedNeedle='" + usedNeedle + '\'' + '}';
    }



}
